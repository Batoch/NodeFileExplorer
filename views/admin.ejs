<%- include('header.ejs') %>

<body class="bg-light text-center">
	<header class="header">
	</header>

<div id="newuser">
	<div class="jumbotron shadow-sm p-3 mb-5 d-inline-flex">
		<form @submit="checkFormnewuser" novalidate>
            <legend>Create new user</legend>
            <template v-if="alerts.length">
                <p>
                    <div v-for="error in alerts" class="alert alert-danger">{{ error }}</div>
                </p>
            </template>
            <template v-if="<%= usercreated %> == 1">
                <p>
                    <div class="alert alert-success">Successful created</div>
                </p>
            </template>
            <template v-if="<%= usercreated %> == 2">
                <p>
                    <div class="alert alert-danger">Error</div>
                </p>
            </template>
            <template v-if="<%= usercreated %> == 3">
                <p>
                    <div class="alert alert-success">Successful amended</div>
                </p>
            </template>
			<div class="mb-3">
				<label for="username" class="form-label">Username</label>
				<input v-model="username" type="text" class="form-control" id="username" name="username" placeholder="username" required>
			</div>
			<div class="mb-3">
				<label for="password" class="form-label">Password</label>
				<input v-model="password" type="text" class="form-control" id="password" name="password" placeholder="password" required>
			</div>
            <div class="mb-3 form-check form-switch">
                <input v-model="admin" type="checkbox" class="form-check-input" id="admin" name="admin">
                <label class="form-check-label" for="admin">Admin</label>
              </div>
			<button class="btn btn-primary">Submit</button>
		</form>
	</div>
</div>

<div id="listusers">
    <template v-if="listusers.length">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
              <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">IsAdmin</th>
                <th scope="col">Remove</th>
              </tr>
            </thead>
            <tbody>
              <tr v-for="(user, index) in listusers">
                <th scope="row">{{index}}</th>
                <td>{{user.name}}</td>
                <td>
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckChecked" :checked="user.admin? true : false" disabled>
                </td>
                <td>
                    <button v-if="index != '0'" type="button" class="btn btn-outline-primary" v-on:click="removeuser(user.name)">Remove</button>
                </td>
              </tr>
            </tbody>
          </table>
    </template>
</div>

<script src="/js/crypto-js.js"></script>
<script src="/js/admin.js"></script>

<%- include('footer.ejs') %>